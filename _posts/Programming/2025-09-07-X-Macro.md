---
title: X-Macro 기법
date: 2025-09-07 22:00:00 +0900
categories: [Programming, C++]
tags: [Programming, C++]     # TAG names should always be lowercase
---

컴파일 타임에 Enum 및 리스트에 대한 구조를 정의하고 실수를 줄이면서 최적화를 하는 방법     
매핑되는 데이터를 생성하는데 유리하다.     
    - 컴파일 타임 LookupTable 구축 
    - Switch case에 대한 컴파일 타임 최적화 가능
     
일부 사용 예시     
    - 직접 작성한 코드이며, 정확한 예시가 되지 않을 수 있음.    
    
```
#define FOREACH_ENUM_CLASS_DESCRIPTOR_HEAP(DescriptorHeap) \
	DescriptorHeap(SrvHeap1)   \
	DescriptorHeap(SrvHeap2)   \

enum class DescriptorHeapType : UINT
{
	#define ENUM_CLASS_DESCRIPTOR_HEAP(name) name,
		FOREACH_ENUM_CLASS_DESCRIPTOR_HEAP(ENUM_CLASS_DESCRIPTOR_HEAP)
	#undef ENUM_CLASS_DESCRIPTOR_HEAP
	Count
};

// 실 사용 위치
D3D12_DESCRIPTOR_HEAP_DESC SrvUavHeapDesc;
ZeroMemory(&SrvUavHeapDesc, sizeof(SrvUavHeapDesc));
{
    SrvUavHeapDesc.NumDescriptors = static_cast<UINT>(DescriptorHeapType::Count);
    ...
}
```